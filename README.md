# Introduction

This is a `react-static` site generator that reads data generated by the `json` output target
of Sphinx to generate a static site for Sphinx documentation.

# How it works

Sphinx generates `.fjson` files as output via the `json` builder.  The (Javascript) code
in `./src/setup` is used to configure the site generator to build a site following the
structure of the Sphinx documentation.  It creates routes for all the various pages
that exist in the Sphinx documentation and it uses the same path names consistently so
that all links from within the `body` property for each page point to the correct page
on the static site.

# Organization

## Sphinx Data

The assumption is that this Git repository will be mounted as a submodule in the
Modelica by Example repository and that the `build/json` directory can be found
by looking up one directory and then down into `build/json`.  There are also symbolic
links in the `public` folder that point to the `_images`, `_sources` and `_static`
directories within `build/json`.

## Site Configuration

As previously mentioned, the `./src/setup` directory is Javascript code that is used to
configure the static site generator.  At the moment, `react-static` doesn't seem to
easily support using TypeScript to configure the static site generator (although I
could have used it if I wanted to add an extra transpilation step to generate
`static.config.js`, but that was more trouble than I was willing to go to).

## Components

The `./src/containers` directory contains code written in TypeScript.  This is possible 
because that code is actually **not** executed by `static.config.js` but is instead
loaded via `webpack` based on strings contained in the `getRoutes` function.  So `webpack`
will compile that code on the fly.

# Building

Running `yarn start` puts the system in development mode.  This allows you to edit the
definitions of the React components and hot reload the pages.

To generate the site, you simply run `yarn build`.  This generates everything required
in the `dist` directory.

# Caveats

Some functions (like `Document` and `renderToHtml`) in `static.config.js` only get called
when you actually generate the static site (*i.e.,* via `yarn build`).  So any functionality
introduced via that process won't exist in the development mode.
